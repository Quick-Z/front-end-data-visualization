import{bd as b,aL as w,b5 as d,b8 as L,be as P,bf as j,bg as D,bh as C,au as E,bi as G,ar as O,bj as X,bk as Y,bl as N}from"./ol.088d4eef.js";import{l as T}from"./Vector.796a2063.js";function F(r,n,i,t,e,a,s){var o,l,f=(i-n)/t;if(f===1)o=n;else if(f===2)o=n,l=e;else if(f!==0){for(var h=r[n],v=r[n+1],g=0,p=[0],u=n+t;u<i;u+=t){var y=r[u],_=r[u+1];g+=Math.sqrt((y-h)*(y-h)+(_-v)*(_-v)),p.push(g),h=y,v=_}var S=e*g,c=b(p,S);c<0?(l=(S-p[-c-2])/(p[-c-1]-p[-c-2]),o=n+(-c-2)*t):o=n+c*t}for(var R=s>1?s:2,A=a||new Array(R),u=0;u<R;++u)A[u]=o===void 0?NaN:l===void 0?r[o+u]:w(r[o+u],r[o+t+u],l);return A}function M(r,n,i,t,e,a){if(i==n)return null;var s;if(e<r[n+t-1])return a?(s=r.slice(n,n+t),s[t-1]=e,s):null;if(r[i-1]<e)return a?(s=r.slice(i-t,i),s[t-1]=e,s):null;if(e==r[n+t-1])return r.slice(n,n+t);for(var o=n/t,l=i/t;o<l;){var f=o+l>>1;e<r[(f+1)*t-1]?l=f:o=f+1}var h=r[o*t-1];if(e==h)return r.slice((o-1)*t,(o-1)*t+t);var v=r[(o+1)*t-1],g=(e-h)/(v-h);s=[];for(var p=0;p<t-1;++p)s.push(w(r[(o-1)*t+p],r[o*t+p],g));return s.push(e),s}function V(r,n,i,t,e,a,s){if(s)return M(r,n,i[i.length-1],t,e,a);var o;if(e<r[t-1])return a?(o=r.slice(0,t),o[t-1]=e,o):null;if(r[r.length-1]<e)return a?(o=r.slice(r.length-t),o[t-1]=e,o):null;for(var l=0,f=i.length;l<f;++l){var h=i[l];if(n!=h){if(e<r[n+t-1])return null;if(e<=r[h-1])return M(r,n,h,t,e,!1);n=h}}return null}var I=function(){var r=function(n,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])},r(n,i)};return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");r(n,i);function t(){this.constructor=n}n.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),k=function(r){I(n,r);function n(i,t){var e=r.call(this)||this;return e.flatMidpoint_=null,e.flatMidpointRevision_=-1,e.maxDelta_=-1,e.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(i[0])?e.setFlatCoordinates(t,i):e.setCoordinates(i,t),e}return n.prototype.appendCoordinate=function(i){this.flatCoordinates?d(this.flatCoordinates,i):this.flatCoordinates=i.slice(),this.changed()},n.prototype.clone=function(){var i=new n(this.flatCoordinates.slice(),this.layout);return i.applyProperties(this),i},n.prototype.closestPointXY=function(i,t,e,a){return a<L(this.getExtent(),i,t)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(P(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),j(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,i,t,e,a))},n.prototype.forEachSegment=function(i){return D(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i)},n.prototype.getCoordinateAtM=function(i,t){if(this.layout!=C.XYM&&this.layout!=C.XYZM)return null;var e=t!==void 0?t:!1;return M(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,e)},n.prototype.getCoordinates=function(){return E(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinateAt=function(i,t){return F(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,t,this.stride)},n.prototype.getLength=function(){return T(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},n.prototype.getSimplifiedGeometryInternal=function(i){var t=[];return t.length=G(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,t,0),new n(t,C.XY)},n.prototype.getType=function(){return O.LINE_STRING},n.prototype.intersectsExtent=function(i){return X(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i)},n.prototype.setCoordinates=function(i,t){this.setLayout(t,i,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Y(this.flatCoordinates,0,i,this.stride),this.changed()},n}(N),Z=k;export{Z as L,F as i,V as l};
