import{A as e,d as o,C as n,r as l,f as t,a,w as s,u as r,S as i,g as u,o as c}from"./vendor.da7f5a2b.js";import{f as d}from"./fabric.630692b0.js";const p=u("canvas",{id:"canvas",width:"600",height:"600",style:{border:"1px solid #ccc"}},null,-1),f={setup(u){const f=e();let g=null,b=null,y=o("default");function m(e){switch(e){case"default":g.selection=!0,g.selectionColor="rgba(100, 100, 255, 0.3)",g.selectionBorderColor="rgba(255, 255, 255, 0.3)",g.skipTargetFind=!1;break;case"polygon":g.selectionColor="transparent",g.selectionBorderColor="transparent",g.skipTargetFind=!0}}function v(e){"polygon"===y.value&&(null===b?function(e){const o=e.absolutePointer;b=new d.fabric.Polygon([{x:o.x,y:o.y},{x:o.x,y:o.y}],{fill:"transparent",stroke:"rgba(0, 0, 0, 0.2)",objectCaching:!1}),g.add(b)}(e):function(e){const o=e.absolutePointer;b.points.push({x:o.x,y:o.y}),g.requestRenderAll()}(e))}function h(e){"polygon"===y.value&&b&&function(e){const o=e.absolutePointer;let n=b.points;n[n.length-1].x=o.x,n[n.length-1].y=o.y,g.requestRenderAll()}(e)}function x(e){"polygon"===y.value&&function(e){const o=e.absolutePointer;let n=b.points;if(n[n.length-1].x=o.x,n[n.length-1].y=o.y,n.pop(),n.pop(),g.remove(b),n.length>1){let e=new d.fabric.Polygon(n,{stroke:"#000",fill:"transparent"});g.add(e)}b=null,g.requestRenderAll()}(e)}return n((()=>{f.commit("setComponentPath","src/views/FabricJS/Demo/pages/CreatePolygon/CreatePolygon.vue"),g=new d.fabric.Canvas("canvas"),g.on("mouse:down",v),g.on("mouse:move",h),g.on("mouse:dblclick",x)})),(e,o)=>{const n=l("el-option"),u=l("el-select");return c(),t("div",null,[a(u,{modelValue:r(y),"onUpdate:modelValue":o[0]||(o[0]=e=>i(y)?y.value=e:y=e),onChange:m},{default:s((()=>[a(n,{label:"默认(框选)",value:"default"}),a(n,{label:"多边形",value:"polygon"})])),_:1},8,["modelValue"]),p])}}};export{f as default};
