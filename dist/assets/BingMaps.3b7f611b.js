import{j as e,Z as t,af as i,ag as o,ah as r,A as a}from"./ol.a93c908b.js";import{e as n,c as s,b as c,d as u,a as m}from"./TileImage.8da02cff.js";var l,h=(l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});var d=function(m){function l(o){var r=this,a=void 0!==o.hidpi&&o.hidpi;return(r=m.call(this,{cacheSize:o.cacheSize,crossOrigin:"anonymous",imageSmoothing:o.imageSmoothing,opaque:!0,projection:t("EPSG:3857"),reprojectionErrorThreshold:o.reprojectionErrorThreshold,state:i.LOADING,tileLoadFunction:o.tileLoadFunction,tilePixelRatio:a?2:1,wrapX:void 0===o.wrapX||o.wrapX,transition:o.transition,zDirection:o.zDirection})||this).hidpi_=a,r.culture_=void 0!==o.culture?o.culture:"en-us",r.maxZoom_=void 0!==o.maxZoom?o.maxZoom:-1,r.apiKey_=o.key,r.imagerySet_=o.imagerySet,function(t,i,o,r){var a=document.createElement("script"),n="olc_"+e(i);function s(){delete window[n],a.parentNode.removeChild(a)}a.async=!0,a.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+n;var c=setTimeout((function(){s(),o&&o()}),1e4);window[n]=function(e){clearTimeout(c),s(),i(e)},document.getElementsByTagName("head")[0].appendChild(a)}("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+r.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+r.apiKey_+"&c="+r.culture_,r.handleImageryMetadataResponse.bind(r),void 0,"jsonp"),r}return h(l,m),l.prototype.getApiKey=function(){return this.apiKey_},l.prototype.getImagerySet=function(){return this.imagerySet_},l.prototype.handleImageryMetadataResponse=function(e){if(200==e.statusCode&&"OK"==e.statusDescription&&"ValidCredentials"==e.authenticationResultCode&&1==e.resourceSets.length&&1==e.resourceSets[0].resources.length){var m=e.resourceSets[0].resources[0],l=-1==this.maxZoom_?m.zoomMax:this.maxZoom_,h=this.getProjection(),d=n(h),p=this.hidpi_?2:1,g=m.imageWidth==m.imageHeight?m.imageWidth/p:[m.imageWidth/p,m.imageHeight/p],f=s({extent:d,minZoom:m.zoomMin,maxZoom:l,tileSize:g});this.tileGrid=f;var y=this.culture_,v=this.hidpi_;if(this.tileUrlFunction=c(m.imageUrlSubdomains.map((function(e){var t=[0,0,0],i=m.imageUrl.replace("{subdomain}",e).replace("{culture}",y);return function(e,o,r){if(e){u(e[0],e[1],e[2],t);var a=i;return v&&(a+="&dpi=d1&device=mobile"),a.replace("{quadkey}",function(e){var t,i,o=e[0],r=new Array(o),a=1<<o-1;for(t=0;t<o;++t)i=48,e[1]&a&&(i+=1),e[2]&a&&(i+=2),r[t]=String.fromCharCode(i),a>>=1;return r.join("")}(t))}}}))),m.imageryProviders){var _=o(t("EPSG:4326"),this.getProjection());this.setAttributions(function(e){var t=[],i=e.viewState,o=this.getTileGrid(),n=o.getZForResolution(i.resolution,this.zDirection),s=o.getTileCoordForCoordAndZ(i.center,n)[0];return m.imageryProviders.map((function(i){for(var o=!1,n=i.coverageAreas,c=0,u=n.length;c<u;++c){var m=n[c];if(s>=m.zoomMin&&s<=m.zoomMax){var l=m.bbox,h=[l[1],l[0],l[3],l[2]],d=r(h,_);if(a(d,e.extent)){o=!0;break}}}o&&t.push(i.attribution)})),t.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),t}.bind(this))}this.setState(i.READY)}else this.setState(i.ERROR)},l}(m);export{d as B};
