import{A as e,d as l,C as n,r as o,f as t,a,w as s,u as r,S as i,g as u,o as c}from"./vendor.da7f5a2b.js";import{f as d}from"./fabric.630692b0.js";const p=u("canvas",{id:"canvas",width:"600",height:"600",style:{border:"1px solid #ccc"}},null,-1),f={setup(u){const f=e();let b=null,y=null,m=l("default");function v(e){switch(e){case"default":b.selection=!0,b.selectionColor="rgba(100, 100, 255, 0.3)",b.selectionBorderColor="rgba(255, 255, 255, 0.3)",b.skipTargetFind=!1;break;case"polyline":b.selectionColor="transparent",b.selectionBorderColor="transparent",b.skipTargetFind=!0}}function g(e){"polyline"===m.value&&(null===y?function(e){const l=e.absolutePointer;y=new d.fabric.Polyline([{x:l.x,y:l.y},{x:l.x,y:l.y}],{fill:"transparent",stroke:"rgba(0, 0, 0, 0.2)",objectCaching:!1}),b.add(y)}(e):function(e){const l=e.absolutePointer;y.points.push({x:l.x,y:l.y}),b.requestRenderAll()}(e))}function h(e){"polyline"===m.value&&y&&function(e){const l=e.absolutePointer;let n=y.points;n[n.length-1].x=l.x,n[n.length-1].y=l.y,b.requestRenderAll()}(e)}function x(e){"polyline"===m.value&&function(e){const l=e.absolutePointer;let n=y.points;if(n[n.length-1].x=l.x,n[n.length-1].y=l.y,n.pop(),n.pop(),b.remove(y),n.length>1){let e=new d.fabric.Polyline(n,{stroke:"#000",fill:"transparent"});b.add(e)}y=null,b.requestRenderAll()}(e)}return n((()=>{f.commit("setComponentPath","src/views/FabricJS/Demo/pages/CreatePolyline/CreatePolyline.vue"),b=new d.fabric.Canvas("canvas"),b.on("mouse:down",g),b.on("mouse:move",h),b.on("mouse:dblclick",x)})),(e,l)=>{const n=o("el-option"),u=o("el-select");return c(),t("div",null,[a(u,{modelValue:r(m),"onUpdate:modelValue":l[0]||(l[0]=e=>i(m)?m.value=e:m=e),onChange:v},{default:s((()=>[a(n,{label:"默认(框选)",value:"default"}),a(n,{label:"折线",value:"polyline"})])),_:1},8,["modelValue"]),p])}}};export{f as default};
