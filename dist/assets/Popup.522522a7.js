import{q as t,s as e,B as n,k as o,C as i,b as s,i as a,t as r,F as p,o as l}from"./vendor.c4f0aeec.js";import{T as u}from"./TileImage.6d4ae649.js";import{X as d}from"./XYZ.ba2f4d41.js";import{a7 as h,a8 as c,a9 as f,Q as g,P as m,aa as v,ab as P,ac as y,ad as C,ae as b,M as E,V as w}from"./ol.c16104b5.js";var O,x="bottom-left",_="bottom-center",M="bottom-right",L="center-left",I="center-center",j="center-right",R="top-left",S="top-center",F="top-right",V=(O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),A="element",T="map",B="offset",K="position",N="positioning",z=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container "+h,n.element.style.position="absolute",n.element.style.pointerEvents="auto";var o=e.autoPan;return o&&"object"!=typeof o&&(o={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=o||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addChangeListener(A,n.handleElementChanged),n.addChangeListener(T,n.handleMapChanged),n.addChangeListener(B,n.handleOffsetChanged),n.addChangeListener(K,n.handlePositionChanged),n.addChangeListener(N,n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(void 0!==e.positioning?e.positioning:R),void 0!==e.position&&n.setPosition(e.position),n}return V(e,t),e.prototype.getElement=function(){return this.get(A)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(T)},e.prototype.getOffset=function(){return this.get(B)},e.prototype.getPosition=function(){return this.get(K)},e.prototype.getPositioning=function(){return this.get(N)},e.prototype.handleElementChanged=function(){c(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(f(this.element),g(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=m(t,v.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(A,t)},e.prototype.setMap=function(t){this.set(T,t)},e.prototype.setOffset=function(t){this.set(B,t)},e.prototype.setPosition=function(t){this.set(K,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(K)){var n=this.getRect(e.getTargetElement(),e.getSize()),o=this.getElement(),i=this.getRect(o,[P(o),y(o)]),s=t||{},a=void 0===s.margin?20:s.margin;if(!C(n,i)){var r=i[0]-n[0],p=n[2]-i[2],l=i[1]-n[1],u=n[3]-i[3],d=[0,0];if(r<0?d[0]=r-a:p<0&&(d[0]=Math.abs(p)+a),l<0?d[1]=l-a:u<0&&(d[1]=Math.abs(u)+a),0!==d[0]||0!==d[1]){var h=e.getView().getCenterInternal(),c=e.getPixelFromCoordinateInternal(h);if(!c)return;var f=[c[0]+d[0],c[1]+d[1]],g=s.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(f),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),o=n.left+window.pageXOffset,i=n.top+window.pageYOffset;return[o,i,o+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set(N,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),o=t.getSize();this.updateRenderedPosition(n,o)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,o=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var s=Math.round(t[0]+o[0])+"px",a=Math.round(t[1]+o[1])+"px",r="0%",p="0%";i==M||i==j||i==F?r="-100%":i!=_&&i!=I&&i!=S||(r="-50%"),i==x||i==_||i==M?p="-100%":i!=L&&i!=I&&i!=j||(p="-50%");var l="translate("+r+", "+p+") translate("+s+", "+a+")";this.rendered.transform_!=l&&(this.rendered.transform_=l,n.transform=l,n.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(b);t("data-v-cea54c6a");const k={class:"content"};e();const X={setup(t){const e=n(),h=o(null),c=o(null),f=o(null),g=o(""),m=o(null);function v(){m.value=new z({element:c.value,autoPan:!0,autoPanAnimation:{duration:250}}),f.value=new E({target:h.value,layers:[new u({name:"defaultLayer",source:new d({url:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}"})})],view:new w({projection:"EPSG:4326",center:[113.1206,23.034996],zoom:12}),overlays:[m.value]}),f.value.on("singleclick",(t=>{const e=t.coordinate;g.value=e,m.value.setPosition(e)}))}function P(){m.value.setPosition(void 0),g.value=""}return i((()=>{e.commit("setComponentPath","src/views/OpenLayers/Basic/pages/Popup/Popup.vue"),v()})),(t,e)=>(l(),s(p,null,[a("div",{id:"map",class:"map__x",ref:(t,e)=>{e.mapCom=t,h.value=t}},null,512),a("div",{ref:(t,e)=>{e.popupCom=t,c.value=t},class:"popup"},[a("span",{class:"icon-close",onClick:P},"âœ–"),a("div",k,r(g.value),1)],512)],64))},__scopeId:"data-v-cea54c6a"};export{X as default};
