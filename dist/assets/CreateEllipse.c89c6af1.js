import{A as e,d as l,C as a,r as s,f as t,a as o,w as n,u as r,S as i,g as u,o as c}from"./vendor.da7f5a2b.js";import{f as d}from"./fabric.630692b0.js";const p=u("canvas",{id:"canvas",width:"600",height:"600",style:{border:"1px solid #ccc"}},null,-1),f={setup(u){const f=e();let b=null,m=null,v=null,y=null,g=l("default");function x(e){switch(e){case"default":b.selection=!0,b.selectionColor="rgba(100, 100, 255, 0.3)",b.selectionBorderColor="rgba(255, 255, 255, 0.3)",b.skipTargetFind=!1;break;case"ellipse":b.selectionColor="transparent",b.selectionBorderColor="transparent",b.skipTargetFind=!0}}function C(e){m=e.absolutePointer,"ellipse"===g.value&&(y=new d.fabric.Ellipse({top:m.y,left:m.x,rx:0,ry:0,fill:"transparent",stroke:"rgba(0, 0, 0, 0.2)"}),b.add(y))}function h(e){if("ellipse"===g.value&&y){const l=e.absolutePointer;let a=Math.abs(m.x-l.x)/2,s=Math.abs(m.y-l.y)/2,t=l.y>m.y?m.y:m.y-2*s,o=l.x>m.x?m.x:m.x-2*a;y.set("rx",a),y.set("ry",s),y.set("top",t),y.set("left",o),b.requestRenderAll()}}function w(e){v=e.absolutePointer,"ellipse"===g.value&&(JSON.stringify(m)===JSON.stringify(v)?b.remove(y):y.set("stroke","#000"),y=null)}return a((()=>{f.commit("setComponentPath","src/views/FabricJS/Demo/pages/CreateEllipse/CreateEllipse.vue"),b=new d.fabric.Canvas("canvas"),b.on("mouse:down",C),b.on("mouse:move",h),b.on("mouse:up",w)})),(e,l)=>{const a=s("el-option"),u=s("el-select");return c(),t("div",null,[o(u,{modelValue:r(g),"onUpdate:modelValue":l[0]||(l[0]=e=>i(g)?g.value=e:g=e),onChange:x},{default:n((()=>[o(a,{label:"默认(框选)",value:"default"}),o(a,{label:"椭圆形",value:"ellipse"})])),_:1},8,["modelValue"]),p])}}};export{f as default};
